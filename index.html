<!DOCTYPE html>
<html>
<head>
	<title>Giphs</title>
    <link href="https://fonts.googleapis.com/css?family=Satisfy|Source+Sans+Pro" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">

</head>
<body> 

  <div id="main-div"></div>
  <div id = "new-button">
  	<form>
  		<h4>Add an animal:</h4>
  		<input  type="text" id="new-input">
  	</form>
  	<button id="submit-button">Submit </button>
  	<br>
  </div>
  <div id="image-div"></div>
 <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
 <script type="text/javascript">
	//Questions 
	// for loop 
	// $(this).click( $(this).id.... 

    var topics=["cat", "dog", "turkey", "frog", "bird", "bunny", "camel", "dolphin", "monkey", "snail"]; 
    
   function instantiateButtons(){
    var newButton= $("<button></button>"); 
 	for(var i=0; i<topics.length; i++){
 		/*newButton.attr("id", topics[i]);
 	 	newButton.text(topics[i]); 
 	 	$("#main-div").append(newButton); */ 
     	$("#main-div").append("<button class= animals id =" + topics[i] + ">" + topics[i]+ "</button>"); 
	}
	}

	instantiateButtons(); 

	var value= $("#new-input").val(); 
    
    console.log(value); 
	
 
	$(".animals").click(function(){
		var  buttonId= this.id; 
		addGiphy(buttonId); 
	}); 

  function addGiphy(userInput) {
      var queryURL= "http://api.giphy.com/v1/gifs/search?q=" + userInput + "&limit=10&rating=pg-13&api_key=dc6zaTOxFJmzC";
 
    $.ajax({    
        url: queryURL,

        method: "GET"
      })
      
      .done(function(response) { // comes back as a JSON object 

      	$("#image-div").empty(); 

        for(var i=0; i< response.data.length; i++){

         var imageRating= "<span class='rating'>Rating " + response.data[i].rating + "</span> " + "<br>"; 

         var imageUrl = response.data[i].images.fixed_height_still.url; // still image 
         
         var animatedImage= response.data[i].images.fixed_height.url  // for animated

         var pTag= $("<p>"); 

         pTag.html(imageRating); 

         var imageLink= $("<a>"); 
         
         var setImages = $("<img>");

         setImages.attr("src", imageUrl);

         setImages.attr("class", "still-images"); 

     	 setImages.attr("animated-version", animatedImage);

     	 imageLink.append(setImages);

     	 pTag.append(imageLink); 

     	 $("#image-div").prepend(pTag);
         
         }	
 
      });
	}

	$(".still-images").click(function(){
		console.log(this.animated-version); 
	}); 


	
	
	</script>
</body>
</html>